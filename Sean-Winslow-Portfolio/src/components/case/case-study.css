.case-study {
  position: relative;
  padding: var(--space-10) var(--space-6) var(--space-9);
  max-width: 1120px;
  margin: 0 auto;
  display: grid;
  gap: var(--space-7);
}

.case-study__progress {
  position: sticky;
  top: calc(var(--space-9) + var(--space-2));
  height: 4px;
  background: color-mix(in oklch, oklch(var(--surface-800-oklch)) 60%, transparent);
  border-radius: var(--radius-pill);
  overflow: hidden;
  z-index: 5;
}

.case-study__progress-bar {
  display: block;
  height: 100%;
  width: 100%;
  transform: scaleX(0);
  transform-origin: left center;
  background: oklch(var(--accent-500-oklch));
  transition: transform var(--duration-180) var(--ease-standard);
}

.case-study__intro {
  display: grid;
  gap: var(--space-3);
  align-items: start;
}

.case-study__eyebrow {
  font-size: var(--fs--1);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
}

.case-study__lead {
  font-size: var(--fs-1);
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
  max-width: var(--measure-long);
}

.case-study__outcome-band {
  background: color-mix(in oklch, oklch(var(--surface-900-oklch)) 85%, transparent);
  border: 1px solid oklch(var(--surface-700-oklch));
  border-radius: var(--radius-xl);
  padding: var(--space-6);
  display: grid;
  gap: var(--space-6);
  box-shadow: var(--shadow-1);
}

.case-study__outcome-grid {
  display: grid;
  gap: var(--space-5);
}

.case-study__outcome-item {
  display: grid;
  gap: var(--space-2);
}

.case-study__outcome-label {
  font-size: var(--fs--1);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
}

.case-study__outcome-text {
  font-size: var(--fs-1);
  line-height: var(--leading-tight);
}

.case-study__metrics {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3);
}

.case-study__metric-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 44px;
  padding: 0 var(--space-4);
  border-radius: var(--radius-pill);
  background: color-mix(in oklch, oklch(var(--accent-500-oklch)) 18%, transparent);
  color: var(--color-accent-hex);
  color: oklch(var(--accent-500-oklch));
  border: 1px solid color-mix(in oklch, oklch(var(--accent-500-oklch)) 45%, transparent);
  font-weight: 600;
  letter-spacing: 0.01em;
}

.case-study__layout {
  display: grid;
  gap: var(--space-7);
}

.case-study__toc {
  display: flex;
  gap: var(--space-3);
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  border: 1px solid oklch(var(--surface-700-oklch));
  background: color-mix(in oklch, oklch(var(--surface-900-oklch)) 80%, transparent);
  overflow-x: auto;
}

.case-study__toc nav {
  width: 100%;
}

.case-study__toc-list {
  display: flex;
  gap: var(--space-2);
  list-style: none;
  padding: 0;
  margin: 0;
}

.case-study__toc-item {
  flex: 0 0 auto;
}

.case-study__toc-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 44px;
  padding: 0 var(--space-4);
  border-radius: var(--radius-md);
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
  text-decoration: underline;
  text-underline-offset: 0.18em;
  white-space: nowrap;
  transition: background-color var(--duration-150) var(--ease-standard),
              color var(--duration-150) var(--ease-standard);
}

.case-study__toc-link:hover {
  color: var(--color-text-hex);
  color: var(--color-text);
}

.case-study__toc-link:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring-hex);
  box-shadow: var(--focus-ring);
}

.case-study__toc-link.is-active {
  background: color-mix(in oklch, oklch(var(--accent-500-oklch)) 25%, transparent);
  color: var(--color-text-hex);
  color: var(--color-text);
  box-shadow: inset 0 0 0 1px color-mix(in oklch, oklch(var(--accent-500-oklch)) 55%, transparent);
}

.case-study__content {
  display: grid;
  gap: var(--space-9);
}

.case-study__section {
  display: grid;
  gap: var(--space-4);
}

.case-study__section p {
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
  max-width: var(--measure-long);
}

.case-study__context-grid {
  display: grid;
  gap: var(--space-4);
}

.case-study__context-item {
  background: color-mix(in oklch, oklch(var(--surface-800-oklch)) 60%, transparent);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  border: 1px solid oklch(var(--surface-700-oklch));
  display: grid;
  gap: var(--space-2);
}

.case-study__context-item dt {
  font-size: var(--fs--1);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
}

.case-study__context-item dd {
  margin: 0;
  font-size: var(--fs-1);
}

.case-study__list {
  display: grid;
  gap: var(--space-2);
  padding-left: var(--space-6);
}

.case-study__list li {
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
}

.case-study__approach-steps {
  display: grid;
  gap: var(--space-3);
  counter-reset: approach-step;
}

.case-study__approach-step {
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  border: 1px solid oklch(var(--surface-700-oklch));
  background: color-mix(in oklch, oklch(var(--surface-800-oklch)) 55%, transparent);
  display: grid;
  gap: var(--space-2);
}

.case-study__approach-step::before {
  counter-increment: approach-step;
  content: 'Step ' counter(approach-step);
  font-size: var(--fs--1);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
}

.case-study__change-grid {
  display: grid;
  gap: var(--space-5);
}

.case-study__change-column {
  display: grid;
  gap: var(--space-3);
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  border: 1px solid oklch(var(--surface-700-oklch));
  background: color-mix(in oklch, oklch(var(--surface-800-oklch)) 55%, transparent);
}

.case-study__demos {
  display: grid;
  gap: var(--space-6);
}

.case-study__demo-figure {
  display: grid;
  gap: var(--space-3);
}

.case-study__demo-media {
  position: relative;
  border-radius: var(--radius-xl);
  border: 1px dashed color-mix(in oklch, oklch(var(--accent-500-oklch)) 45%, transparent);
  background: color-mix(in oklch, oklch(var(--surface-800-oklch)) 65%, transparent);
  aspect-ratio: 16 / 9;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
  font-size: var(--fs-0);
}

.case-study__demo-caption {
  margin: 0;
  color: var(--color-text-dim-hex);
  color: var(--color-text-dim);
}

.case-study__metrics-table {
  display: grid;
  gap: var(--space-3);
  background: color-mix(in oklch, oklch(var(--surface-800-oklch)) 55%, transparent);
  border-radius: var(--radius-lg);
  border: 1px solid oklch(var(--surface-700-oklch));
  padding: var(--space-4);
}

.case-study__metrics-row {
  display: flex;
  justify-content: space-between;
  gap: var(--space-3);
}

.case-study__metrics-label {
  font-weight: 500;
}

.case-study__next-bets {
  display: grid;
  gap: var(--space-2);
  padding-left: var(--space-6);
}

.case-study__cta {
  align-self: start;
  margin-top: var(--space-4);
}

@media (min-width: 640px) {
  .case-study {
    padding-inline: var(--space-7);
  }

  .case-study__outcome-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .case-study__context-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (min-width: 900px) {
  .case-study {
    padding-inline: var(--space-8);
  }

  .case-study__outcome-grid {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .case-study__change-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (min-width: 1024px) {
  .case-study__layout {
    grid-template-columns: 260px minmax(0, 1fr);
    align-items: start;
  }

  .case-study__toc {
    position: sticky;
    top: calc(var(--space-9) * 2);
    flex-direction: column;
    overflow: visible;
  }

  .case-study__toc-list {
    flex-direction: column;
  }

  .case-study__toc-item {
    width: 100%;
  }

  .case-study__toc-link {
    justify-content: flex-start;
    width: 100%;
  }
}

@media (max-width: 639px) {
  .case-study__progress {
    top: calc(var(--space-8));
  }
}
